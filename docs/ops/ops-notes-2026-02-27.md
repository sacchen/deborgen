# Ops Notes (2026-02-27)

This document records the operational changes made for the coordinator droplet and the server-side development workflow.

## Host Constraints

- Droplet (`deborgen-coord-01`) = `2 GB` RAM, `2 GB` swap, x86_64, `70 GB` class disk.
- This host can run the coordinator continuously and support light Codex CLI work.
- Heavy development tasks and the worker should not run while Codex is in active use.

## Current Operating Model

- Coordinator stays on under `systemd` from `/home/dev/deborgen`.
- Codex development work happens in a separate checkout at `/home/dev/deborgen-dev`.
- Worker stays off during Codex sessions on this host.

## Swap

- Added a `2 GB` swap file.
- Set:
  - `vm.swappiness=10`
  - `vm.vfs_cache_pressure=50`

Swap is configured as an OOM safety buffer, not normal working memory.

## Git / Development Workflow

- `/home/dev/deborgen-dev` was separated from the production-oriented checkout.
- The dev checkout now uses:
  - `origin` -> GitHub
  - `prod-local` -> `/home/dev/deborgen`
- Pushes to `prod-local` are disabled.
- The repository requires pull requests for changes to `main`.

Use this workflow:

1. Make changes in `/home/dev/deborgen-dev`.
2. Commit locally.
3. Push a feature branch.
4. Open a PR into `main`.

## Documentation Alignment

The checked-in deployment docs and coordinator service template were aligned with the validated host setup:

- coordinator `ExecStart` now matches the live `uvicorn` launch command
- template uses `Restart=always`
- template uses `RestartSec=2`
- template includes `NoNewPrivileges=true`
- quickstart remains the manual/demo path
- deployment docs are the durable production path
